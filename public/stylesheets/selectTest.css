/* =========================================
   1. GLOBAL SETTINGS
   ========================================= */
body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
    margin: 0;
    background-color: #f8fafc;
    color: #334155;
    line-height: 1.6;
}

/* =========================================
   2. TOPIC BANNER SECTION
   ========================================= */
.topic-banner {
    background-color: #1e293b;
    background-size: cover;
    background-position: center;
    position: relative;
    color: #ffffff;
}

.topic-overlay {
    background: linear-gradient(to bottom, rgba(63, 63, 63, 0.8), rgba(63, 63, 63, 0.9));
    padding: 80px 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

#category-name {
    font-size: 2.8rem;
    font-weight: 800;
    margin: 0 0 15px 0;
    letter-spacing: -0.025em;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

#category-description {
    font-size: 1.15rem;
    max-width: 700px;
    margin: 0 auto;
    color: #94a3b8;
    font-weight: 400;
}

/* =========================================
   3. MAIN CONTAINER
   ========================================= */
.main-container {
    max-width: 960px;
    margin: -40px auto 40px auto;
    padding: 0 20px;
    display: flex;
    flex-direction: column;
    gap: 35px;
    position: relative;
    z-index: 10;
}

/* =========================================
   4. HERO SECTION (START CARD)
   ========================================= */
.start-card {
    background-color: #ffffff;
    background-image: url('/images/TestBG.jpg'); 
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    
    width: 100%;
    padding: 40px;
    border-radius: 20px;
    text-align: center;
    
    /* Box shadow và Border theo màu xanh #114e8b bạn yêu cầu */
    box-shadow: rgba(17, 78, 139, 0.4) 0px 6px, 
                rgba(17, 78, 139, 0.15) 0px 12px;
    border: 1px solid #114e8b;
    box-sizing: border-box;
}

.start-card h2 {
    margin: 0 0 12px 0;
    color: #1e293b;
    font-size: 1.8rem;
    font-weight: 700;
    text-shadow: 0 2px 10px rgba(255, 255, 255, 0.8); /* Thêm viền sáng nhẹ để chữ rõ trên nền ảnh */
}

.start-card p {
    margin: 0 0 30px 0;
    color: #475569;
    font-size: 1.05rem;
    font-weight: 500;
    text-shadow: 0 1px 5px rgba(255, 255, 255, 0.8);
}

.btn-hero-start {
    background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
    color: white;
    font-size: 1.2rem;
    font-weight: 600;
    padding: 16px 45px;
    border: none;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 10px 15px -3px rgba(99, 102, 241, 0.4);
    display: inline-flex;
    align-items: center;
    gap: 12px;
}

.btn-hero-start:hover {
    transform: translateY(-2px);
    box-shadow: 0 20px 25px -5px rgba(99, 102, 241, 0.5);
    filter: brightness(1.1);
}

/* =========================================
   5. SEARCH & FILTER WRAPPER
   ========================================= */
.search-filter-wrapper {
    display: flex;
    gap: 15px;
    align-items: center;
}

.search-form-test {
    flex: 3;
    display: flex;
    background: white;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
    border-radius: 12px;
    overflow: hidden;
    border: 1px solid #e2e8f0;
    transition: box-shadow 0.2s;
}

.search-form-test:focus-within {
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
    border-color: #6366f1;
}

.search-form-test input {
    flex-grow: 1;
    padding: 14px 20px;
    border: none;
    outline: none;
    font-size: 1rem;
    color: #334155;
}

.search-form-test button {
    padding: 0 25px;
    border: none;
    background-color: #f1f5f9;
    color: #475569;
    cursor: pointer;
    font-size: 1.1rem;
    transition: background-color 0.2s;
}

.search-form-test button:hover {
    background-color: #e2e8f0;
    color: #1e293b;
}

.filter-box {
    flex: 1;
}

.filter-select {
    width: 100%;
    padding: 14px 15px;
    border-radius: 12px;
    border: 1px solid #e2e8f0;
    font-size: 1rem;
    color: #475569;
    background-color: white;
    cursor: pointer;
    outline: none;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
    transition: all 0.2s;
}

.filter-select:focus {
    border-color: #6366f1;
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
}

@media (max-width: 600px) {
    .search-filter-wrapper {
        flex-direction: column;
    }
    .search-form-test, 
    .filter-box {
        width: 100%;
    }
}

/* =========================================
   6. QUESTION LIST items
   ========================================= */
.browser-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 2px solid #e2e8f0;
}

.browser-header h3 {
    margin: 0;
    color: #334155;
    font-size: 1.4rem;
    font-weight: 700;
}

.badge-count {
    background: #e0e7ff;
    color: #4338ca;
    padding: 6px 14px;
    border-radius: 99px;
    font-size: 0.9rem;
    font-weight: 700;
}

.question-list {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.test-item-horizontal {
    background: white;
    padding: 20px 25px;
    border-radius: 16px;
    border: 1px solid #f1f5f9;
    display: flex;
    align-items: center;
    gap: 25px;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.05);
}

.test-item-horizontal:hover {
    border-color: #6366f1;
    transform: translateY(-3px);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
}

.test-icon-wrapper {
    font-size: 1.8rem;
    min-width: 50px;
    text-align: center;
    color: #6366f1;
    background: #e0e7ff;
    width: 50px;
    height: 50px;
    line-height: 50px;
    border-radius: 12px;
}

.test-content-wrapper {
    flex: 1;
}

.test-item-title {
    font-size: 1.1rem;
    margin: 0 0 6px 0;
    color: #1e293b;
    font-weight: 600;
}

.test-item-meta {
    font-size: 0.9rem;
    color: #64748b;
    display: flex;
    gap: 10px;
}

.meta-difficulty.easy { color: #10b981; font-weight: 600; }
.meta-difficulty.medium { color: #f59e0b; font-weight: 600; }
.meta-difficulty.hard { color: #ef4444; font-weight: 600; }

.pagination-controls {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 30px;
    align-items: center;
}

.btn-page {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    border: 1px solid #e2e8f0;
    background: white;
    color: #475569;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.2s;
}

.btn-page:hover:not(:disabled) {
    background: #f1f5f9;
    color: #6366f1;
    border-color: #cbd5e1;
}

.btn-page:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    background: #f8fafc;
}

/* =========================================
   7. MODAL (POPUP) - FIXED HEIGHT & SCROLL
   ========================================= */
.modal-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(15, 23, 42, 0.65);
    z-index: 1000;
    justify-content: center;
    align-items: center;
    padding: 20px; /* Padding để modal không dính sát mép màn hình mobile */
    backdrop-filter: blur(5px);
    box-sizing: border-box; /* Quan trọng để tính toán padding đúng */
}

.modal-overlay.show {
    display: flex;
    animation: fadeIn 0.3s ease-out;
}

.config-modal-box {
    background: white;
    width: 100%;
    max-width: 500px;
    /* --- FIX TRÀN MÀN HÌNH TẠI ĐÂY --- */
    max-height: 85vh; /* Giới hạn chiều cao chỉ chiếm 85% màn hình */
    display: flex;    /* Bật Flexbox để chia layout dọc */
    flex-direction: column; /* Xếp Header - Body - Footer theo chiều dọc */
    /* -------------------------------- */
    border-radius: 20px;
    overflow: hidden; /* Ẩn phần thừa */
    position: relative;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    animation: slideUp 0.35s cubic-bezier(0.16, 1, 0.3, 1);
}

.modal-header {
    background: #ffffff;
    padding: 20px 25px; /* Giảm padding một chút cho gọn */
    text-align: left;
    border-bottom: 1px solid #f1f5f9; /* Thêm viền mờ ngăn cách */
    flex-shrink: 0; /* Không cho header bị co lại */
}

.modal-header h2 {
    margin: 0;
    color: #1e293b;
    font-size: 1.4rem;
    font-weight: 700;
}

.close-modal-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    color: #94a3b8;
    font-size: 1.6rem;
    cursor: pointer;
    line-height: 1;
    transition: color 0.2s;
    background: transparent;
    border: none;
}

.close-modal-btn:hover {
    color: #334155;
}

.modal-body {
    padding: 20px 25px;
    /* --- FIX SCROLL TẠI ĐÂY --- */
    overflow-y: auto; /* Chỉ hiện thanh cuộn ở body nếu nội dung dài */
    flex: 1; /* Tự động chiếm hết khoảng trống còn lại */
    /* -------------------------- */
}

/* Tùy chỉnh thanh cuộn cho đẹp hơn (Optional - Webkit browsers) */
.modal-body::-webkit-scrollbar {
    width: 6px;
}
.modal-body::-webkit-scrollbar-track {
    background: #f1f5f9;
}
.modal-body::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 10px;
}
.modal-body::-webkit-scrollbar-thumb:hover {
    background: #94a3b8;
}

/* Các class con bên trong Body giữ nguyên */
.section-title {
    margin: 0 0 15px 0;
    font-size: 0.9rem;
    font-weight: 700;
    color: #334155;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    border-left: 4px solid #6366f1;
    padding-left: 10px;
}

.form-group { margin-bottom: 15px; } /* Giảm margin một chút cho gọn */

.form-group label {
    display: block;
    margin-bottom: 6px;
    font-weight: 600;
    color: #334155;
    font-size: 0.9rem;
}

.form-row { 
    display: flex; 
    gap: 15px; 
}

.form-group.half { 
    flex: 1; 
}

.divider {
    border: 0;
    border-top: 1px dashed #cbd5e1;
    margin: 5px 0;
}

.form-control {
    width: 100%;
    padding: 10px 12px;
    border: 2px solid #e2e8f0;
    border-radius: 10px;
    font-size: 0.95rem;
    box-sizing: border-box;
    transition: all 0.2s;
    color: #1e293b;
    background: #fff;
}
.form-control:focus {
    border-color: #6366f1;
    outline: none;
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}
.form-control.sm { padding: 8px 10px; font-size: 0.9rem; }

.readonly {
    background-color: #f1f5f9;
    border-color: #cbd5e1;
    color: #64748b;
    font-weight: 600;
    cursor: not-allowed;
}
select:disabled {
    background-color: #f8fafc;
    color: #94a3b8;
    cursor: not-allowed;
    border-color: #e2e8f0;
}

/* Mode Options */
.mode-option {
    border: 2px solid #e2e8f0;
    border-radius: 12px;
    padding: 12px;
    margin-bottom: 12px;
    transition: all 0.2s;
    background: #fff;
    cursor: pointer;
}
.mode-option:hover { border-color: #cbd5e1; }
.mode-option.active { border-color: #6366f1; background-color: #eef2ff; }

.radio-header { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; cursor: pointer; }
.radio-header label { cursor: pointer; color: #1e293b; font-weight: 600; font-size: 0.95rem; }
.radio-header input[type="radio"] { accent-color: #6366f1; width: 16px; height: 16px; margin: 0; }

.mode-controls { display: flex; gap: 10px; padding-left: 26px; }
.control-item { flex: 1; }
.control-item.full-width { width: 100%; }
.control-item label { display: block; font-size: 0.75rem; color: #64748b; margin-bottom: 4px; font-weight: 500; }

.modal-footer {
    padding: 20px 25px;
    background: #f8fafc;
    text-align: center;
    border-top: 1px solid #e2e8f0;
    flex-shrink: 0; /* Không cho footer bị co lại */
}

.btn-confirm-start {
    background: #6366f1;
    color: white;
    border: none;
    padding: 12px 30px;
    border-radius: 12px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    width: 100%;
    transition: background 0.2s;
    box-shadow: 0 4px 6px -1px rgba(99, 102, 241, 0.2);
}
.btn-confirm-start:hover { background: #4f46e5; transform: translateY(-1px); }

/* Animations Keyframes */
@keyframes slideUp {
    from { transform: translateY(40px) scale(0.95); opacity: 0; }
    to { transform: translateY(0) scale(1); opacity: 1; }
}
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}


/* =========================================
   ✅ PRACTICE MODAL STYLES (KẾT HỢP & TỐI ƯU)
   ========================================= */

/* Định nghĩa biến màu chủ đạo nếu chưa có */
/* Lưu ý: Bạn cần đảm bảo --primary-color đã được định nghĩa ở đâu đó trong CSS gốc của bạn.
   Nếu không, các dòng sử dụng nó sẽ không hoạt động.
   Tạm thời sử dụng một giá trị mặc định cho ví dụ này: */
:root {
    --primary-color: #0284c7; /* Màu chủ đạo mặc định (xanh dương) */
}


/* 1. Modal Box & Cấu trúc chính */
.practice-modal-box {
    /* Cải tiến từ 'Sửa lỗi' */
    background-color: #ffffff;
    max-width: 600px; /* Chọn max-width hẹp hơn một chút */
    width: 90%; /* Để không bị quá to trên mobile */
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    display: flex;
    flex-direction: column;
    max-height: 85vh;
}

/* Modal Body (Nội dung chính) */
.modal-body {
    padding: 25px;
    overflow-y: auto;
    flex-grow: 1; /* Cho phép phần thân chiếm không gian còn lại */
}


/* 2. Modal Header */
.practice-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 25px; /* Giảm padding trên dưới một chút */
    background: linear-gradient(to right, #f8fafc, #fff);
    border-bottom: 1px solid #e2e8f0;
}

.practice-header h2 {
    font-size: 1.3rem; /* Kích thước từ 'Sửa lỗi' */
    color: var(--primary-color);
    margin: 0;
    font-weight: 700;
    display: flex; /* Giữ lại flex cho icon nếu có */
    align-items: center;
    gap: 10px;
}

/* Nút đóng (X) */
.close-practice-btn {
    font-size: 2rem;
    color: #94a3b8;
    cursor: pointer;
    line-height: 2rem;
    height: 2rem;
    width: 2rem;
    text-align: center;
    border-radius: 50%;
    transition: all 0.2s;
    padding: 0; /* Loại bỏ padding 0 5px cũ */
}
.close-practice-btn:hover {
    color: #ef4444;
    background-color: #fee2e2;
}


/* 3. Question Text */
.practice-q-text {
    font-size: 1.15rem; /* Giữ kích thước lớn hơn từ 'NEW' */
    font-weight: 600;
    color: #1e293b;
    margin-bottom: 25px;
    line-height: 1.6; /* Chọn line-height tốt hơn từ 'Sửa lỗi' */
}


/* 4. Options List (Danh sách đáp án) */
.practice-options-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

/* Từng dòng đáp án */
.practice-option-row {
    padding: 14px 18px;
    border: 2px solid #e2e8f0;
    border-radius: 10px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 15px;
    background: #fff;
    transition: all 0.2s ease;
    font-size: 1rem;
    color: #475569;
}

.practice-option-row:hover {
    background-color: #f1f5f9;
    border-color: #cbd5e1;
}

/* Khi được chọn */
.practice-option-row.selected {
    border-color: var(--primary-color);
    background-color: #eef2ff;
    color: var(--primary-color);
    font-weight: 600;
    box-shadow: 0 0 0 1px var(--primary-color);
}

/* Radio button & Label */
.practice-option-row input[type="radio"] {
    transform: scale(1.2);
    accent-color: var(--primary-color);
    cursor: pointer;
}
.practice-option-row label {
    flex: 1;
    cursor: pointer;
}


/* 5. Modal Footer & Check Button */
.modal-footer {
    padding: 15px 25px;
    background-color: #f8fafc;
    border-top: 1px solid #e2e8f0;
}

.practice-check-btn {
    width: 100%;
    padding: 12px; /* Dùng padding nhỏ hơn từ 'Sửa lỗi' */
    background-color: var(--primary-color); /* Dùng màu chủ đạo */
    color: white;
    font-weight: 600;
    border-radius: 8px;
    border: none;
    transition: background 0.2s;
    /* Có thể thêm các style khác nếu cần kế thừa từ btn-confirm-start */
}
.practice-check-btn:hover {
    background-color: #4f46e5; /* Thay đổi màu hover */
}

/* Style khi bị disabled (Quan trọng!) */
.practice-check-btn:disabled {
    background: #94a3b8 !important;
    color: #e2e8f0 !important;
    cursor: not-allowed;
    transform: none !important;
    box-shadow: none !important;
    opacity: 0.8;
}


/* 6. Result Box (Kết quả) */
.practice-result-box {
    margin-top: 25px;
    padding: 20px;
    border-radius: 12px;
    animation: slideUpFade 0.3s ease-out;
}

/* Keyframes cho hiệu ứng */
@keyframes slideUpFade {
    from { opacity: 0; transform: translateY(15px); }
    to { opacity: 1; transform: translateY(0); }
}

.result-status {
    margin: 0 0 10px 0;
    font-size: 1.1rem;
    display: flex;
    align-items: center;
    gap: 8px;
}

.result-explanation {
    font-size: 0.95rem;
    color: #334155;
    line-height: 1.6;
    display: flex;
    gap: 10px;
    align-items: flex-start;
}
.result-explanation i {
    color: #f59e0b;
    margin-top: 3px;
}

/* Các trạng thái màu sắc của kết quả */
.result-success {
    background-color: #d1fae5;
    border: 1px solid #10b981;
}
.result-success .result-status { color: #059669; }

.result-error {
    background-color: #ffe4e6;
    border: 1px solid #ef4444;
}
.result-error .result-status { color: #dc2626; }